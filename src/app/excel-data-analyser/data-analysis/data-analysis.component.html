<app-topbar [topBarData]="path"></app-topbar>

<div class="card">
  <p-card>
    <p-dropdown [options]="tableType" [(ngModel)]="value" placeholder="Select a Table" appendTo="body"
      (onChange)="fetchList($event.value)" [showClear]="true"></p-dropdown>
  </p-card>
</div>
<div class="card" style="margin-top: 5px">

  <div class="row margin25" *ngIf="columnHeaders">
    <div class="{{displayViewColumnSection || displayAdvanceFiltersComponents ? 'col-md-8' : 'col-md-12'}}">
      <p-card>
        <p-tabMenu [model]="items" [activeItem]="activeItem"></p-tabMenu>
        <p-button (click)="onExportDataClick()" type="button" class="pt-2" style=" 
        float: right; padding-left: 5px;">Export Data</p-button>
        <p-button (click)="onViewColumnsClick()" type="button" class="pt-2" style=" 
          float: right;">View Columns</p-button>
        <p-button (click)="onAdvanceFiltersClick()" type="button" class="pt-2 advance-filter-button">Advance Filters
        </p-button>
        <app-data-analyser-table [payloadFilters]="payloadFiltersList"  [tableName]="tableName" [showableColumn]="showableColumn"></app-data-analyser-table>

      </p-card>
    </div>
    <div class="col-md-4" *ngIf="displayAdvanceFiltersComponents">
      <mat-card style="height: 100%;">
        <app-advance-filter  (filterListChange)="updatedFilterList($event)" [columnWithTypes]="columnWithTypes"  ></app-advance-filter>
      </mat-card>
    </div>
    <div class="col-md-4" *ngIf="displayViewColumnSection">
      <mat-card style="height: 100%;">
        <h3>Select Columns to View</h3>
        <div class="ui-g" style="margin-bottom:10px;margin-top: 20px;">
          <div class="ui-g-2">
            <p-checkbox binary="true" [(ngModel)]="selectAllColumns" (onChange)="checkAllValue()" inputId="R">
            </p-checkbox> Select All
          </div>
        </div>
        <div class="ui-g" style="margin-bottom:10px;" *ngFor="let column of columnHeaders; let i = index">
          <div class="ui-g-2">
            <p-checkbox binary="true" [(ngModel)]="permissions[i]" (onChange)="checkSingleColumn()"></p-checkbox>
            {{column | titlecase}}
          </div>
        </div>
        <mat-card-actions>
          <p-button (click)="onApplyColumnsView()" type="button" class="pt-2" style=" 
          float: right; margin-right: 30px;">Apply</p-button>
        </mat-card-actions>
      </mat-card>
    </div>
  </div>
</div>