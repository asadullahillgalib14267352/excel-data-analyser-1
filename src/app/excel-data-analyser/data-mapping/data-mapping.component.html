
<app-topbar [topBarData]="path"></app-topbar>
<div class="row margin25">
    <div class="col-md-6">
      <h3><b>Data Mapping</b></h3>
    </div>
    <div class="col-md-6">
      <h3 style="float: right;"><b>File Name: Employee.xlsx</b></h3>
    </div>
  </div>
  <br><br>
  <mat-card style="background-color: #eeeeee;">
    <mat-card-content>
      <div class="content">
        <div class="row margin25">
          <section style="width: 50%; padding-left: 20%;">
            <p><b>Select Table: </b></p>
            <mat-form-field appearance="outline">
              <mat-select name="tableElement" placeholder="Select a table" (selectionChange)="onTableChange($event.value)">
                <mat-option *ngFor="let item of tables" [value]="item">{{item.name}}</mat-option>
              </mat-select>
            </mat-form-field>
          </section>

          <section style="width: 50%; padding-right: 20%;">
            <p><b>Mapper: </b></p>
            <mat-form-field appearance="outline">
              <mat-select name="periodicElement" placeholder="Select a mapper" (selectionChange)="onMapperSelect($event.value)">
                <mat-option *ngFor="let item of mappers" [value]="item">{{item.name}}</mat-option>
              </mat-select>
            </mat-form-field>
          </section>
        </div>


        <div class="row margin25">
          <div style="width: 70%; float:left">
            <div class="dragdrop-wrapper" cdkDropList #fullUserList="cdkDropList" [cdkDropListData]="mappedTableColumns"
              [cdkDropListConnectedTo]="[doneList]" (cdkDropListDropped)="dropItem($event)">
              <div class="row margin25">
                <div class="col-md-6">
                  <h4 style="padding-left: 5%;"><b>Excel Column</b></h4>
                  <div class="dragdrop-fix" *ngFor="let column of mappedExcelColumns">{{column}}</div>
                </div>
                <div class="col-md-6">
                  <h4 style="padding-left: 5%;"><b>Mapping Column</b></h4>
                  <div class="dragdrop-inner" *ngFor="let tColumns of mappedTableColumns" cdkDrag>{{tColumns}}</div>
                </div>
              </div>
            </div>
          </div>
          <div style="width: 30%; float:right">
            <div class="dragdrop-wrapper" cdkDropList #doneList="cdkDropList" [cdkDropListData]="remainigTableColumns"
              [cdkDropListConnectedTo]="[fullUserList]" (cdkDropListDropped)="dropItem($event)">
              <h4 style="padding-left: 5%;"><b>Choose Table Properties</b></h4>
              <div class="dragdrop-inner" *ngFor="let ut of remainigTableColumns" cdkDrag>{{ut}}</div>
            </div>
          </div>

        </div>
      </div>
    </mat-card-content>
    <mat-card-actions style="text-align: center;">
      <button mat-button style="background-color:green;
               color:white" (click)="showMappedTable()">
        View Mapping Excel
      </button>
      <button mat-button style="background-color:green;
               color:white" (click)="showDialog()">
        Save Mapping
      </button>
    </mat-card-actions>
  </mat-card>

  <mat-card style="margin-top: 10px;" *ngIf="showTable">
    <table mat-table [dataSource]="dataSource" style="width: 100%;">

      <ng-container matColumnDef="name">
        <th mat-header-cell *matHeaderCellDef> Name (empName)</th>
        <td mat-cell *matCellDef="let element"> {{element.name}} </td>
      </ng-container>

      <ng-container matColumnDef="address">
        <th mat-header-cell *matHeaderCellDef> Address (empAddress)</th>
        <td mat-cell *matCellDef="let element"> {{element.address}} </td>
      </ng-container>

      <ng-container matColumnDef="age">
        <th mat-header-cell *matHeaderCellDef> Age (empAge)</th>
        <td mat-cell *matCellDef="let element"> {{element.age}} </td>
      </ng-container>

      <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
      <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
    </table>


  </mat-card>

  <p-dialog header="Title" [(visible)]="displayDialog" [style]="{width: '50vw'}">
    <mat-card>

    </mat-card>
  </p-dialog>
